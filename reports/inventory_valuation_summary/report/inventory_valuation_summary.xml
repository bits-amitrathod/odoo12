<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="inventory_valuation_template">
        <t t-call="web.html_container">
            <t t-call="web.external_layout">
                <page>
                    <style>
                        .noborders {
                        border: 0;
                        }

                        <!--.table-bordered > tbody > tr > td,.table-bordered > tbody > tr > th {-->
                        <!--border: 1px solid #000;-->
                        <!--}-->
                    </style>
                    <div class="oe_structure"/>
                    <div class="row">
                        <center>
                            <b>
                                <h2>Surgical Product Solutions</h2>
                                <h4>Inventory Valuation Summary</h4>
                            </b>
                        </center>

                    </div>
                    <br/>
                    <t t-set="grandAmount" t-value="0"/>
                    <div t-foreach="warehouses" t-as="warehouse" class="row">
                        <div class="col-md-12">
                            <strong>
                                <span t-esc="warehouse['warehouse']"/>
                            </strong>
                            <hr style="margin: 5px 0px;"/>
                        </div>

                        <t t-set="locationAmount" t-value="0"/>
                        <div class="col-md-12" t-foreach="warehouse['type']" t-as="type">
                            <div>
                                <strong>
                                    <span t-esc="type[0]"/>
                                </strong>
                                <!--<hr style="margin: 5px 0px;"/>-->
                            </div>

                            <table class="table table-condensed table-bordered table-bordered">
                                <thead>
                                    <tr>
                                        <th>Product SKU</th>
                                        <th>Product Name</th>
                                        <th class="text-right">Qty</th>
                                        <th class="text-right">Unit Cost</th>
                                        <th class="text-right">Asset Value</th>
                                    </tr>
                                </thead>
                                <tbody class="invoice_tbody">
                                    <t t-set="products" t-value="type[1].split('||**||')"/>
                                    <t t-set="totalAmount" t-value="0"/>


                                    <tr t-foreach="products" t-as="product_s">
                                        <t t-set="product" t-value="product_s.split('**|**')"/>
                                        <t t-set="assetValue" t-value="float(product[4])"/>

                                        <td>
                                            <span t-esc="product[0]"/>
                                        </td>
                                        <td class="text-right">
                                            <span t-esc="product[1]"/>
                                        </td>
                                        <td class="text-right">
                                            <span t-esc="product[2]"/>
                                        </td>
                                         <td class="text-right">
                                            $<span t-esc="product[3]"/>
                                        </td>
                                        <td class="text-right">
                                            $
                                            <span t-esc="assetValue"/>
                                        </td>
                                        <!--<td class="text-right">-->
                                        <!--<span t-field="product.product_tmpl_id.list_price"/>-->
                                        <!--</td>-->
                                        <!--<td class="text-right">-->
                                        <!--<span t-field="product.stock_value"-->
                                        <!--t-options='{"widget": "monetary", "display_currency": product.currency_id}'/>-->
                                        <!--</td>-->

                                        <t t-set="totalAmount" t-value="totalAmount+assetValue"/>
                                        <t t-set="locationAmount" t-value="locationAmount+assetValue"/>
                                        <t t-set="grandAmount" t-value="grandAmount+assetValue"/>
                                    </tr>
                                </tbody>
                            </table>
                            <div id="total" class="row">
                                <div class="col-xs-4 pull-right">
                                    <table class="table table-condensed" style="min-width: 250px;max-width: 400px;">
                                        <tr >
                                            <td>
                                                <strong>Total</strong>
                                            </td>
                                            <td class="text-right">
                                                $
                                                <span t-esc="totalAmount"/>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <!--Location Total-->
                        <div id="total">
                            <div class="col-xs-4 pull-right">
                                <table class="table table-condensed" style="min-width: 250px;max-width: 400px;">
                                    <tr>
                                        <td>
                                            <strong>Location Total</strong>
                                        </td>
                                        <td class="text-right">
                                            $
                                            <span t-esc="locationAmount"/>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>

                    </div>
                    <!--Grand Total-->
                    <div id="total" class="row">
                        <div class="col-xs-4 pull-right">
                            <table class="table table-condensed" style="min-width: 250px;max-width: 400px;">
                                <tr>
                                    <td>
                                        <strong>Grand Total</strong>
                                    </td>
                                    <td class="text-right">
                                        $
                                        <span t-esc="grandAmount"/>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>


                </page>
            </t>
        </t>
    </template>
</odoo>