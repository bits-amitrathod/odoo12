<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <template id="sh_activity_portal_my_home_menu" name="Portal layout : activity menu entries" inherit_id="portal.portal_breadcrumbs" priority="30">
        <xpath expr="//ol[hasclass('o_portal_submenu')]" position="inside">
            <li t-if="page_name == 'sh_activity' or sh_activity" t-attf-class="breadcrumb-item #{'active' if not sh_activity else ''}">
                <a t-if="sh_activity" t-attf-href="/my/activities?{{ keep_query() }}">Activities</a>
                <t t-else="">Activities</t>
            </li>
            <li t-if="sh_activity" class="breadcrumb-item active">
                <span t-field="sh_activity.res_name" />
            </li>
        </xpath>
    </template>

    <template id="activity_management_portal_my_home" name="Portal My Home : All Activities" inherit_id="portal.portal_my_home" priority="20">
        <xpath expr="//div[hasclass('o_portal_docs')]" position="inside">
            <t t-call="portal.portal_docs_entry">
                <t t-set="title">All Activities</t>
                <t t-set="url" t-value="'/my/activities'" />
                <t t-set="placeholder_count" t-value="'activity_count'" />
            </t>
        </xpath>
    </template>

    <template id="portal_my_activities" name="All Activities">        
        <t t-call="portal.portal_layout">
            <t t-set="breadcrumbs_searchbar" t-value="True" />
            <t t-call="portal.portal_searchbar">
                <t t-set="title">Activities</t>
                <div class="form-inline ms-lg-2 sh_create_activity_view btn-group ml-2">
                    <a id="click_create_activity" class="btn btn-primary btn-sm sticky-lg-to" title="Create Activity" aria-label="Create Activity" role="button" style="color:white;"><i class="fa fa-plus" /> Create New</a>
                </div>
                <div class="js_cls_schedule_view">
                    <div class="modal fade bd-example-modal-lg js_cls_schedule_create" role="dialog">
                    <div class="modal-dialog modal-lg" role="Schedule">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">Schedule Activity</h5>                                           
                            </div>
                            <div class="modal-body">                                                  
                                <div class="row">
                                    <div class="form-group col-6">
                                        <div class="row form-field o_website_form_required_custom">
                                            
                                            <div class="col-4">
                                                <label class="col-form-label" for="link_name" style="color:black;">Document Name</label>
                                            </div>
                                            <div class="col-8">                                           
                                                <input type="text" class="form-control" id="doc_name" name="doc_name" readonly="True"/>
                                            </div>
                                                                                                                    
                                        </div>
                                    </div>
                                    <div class="form-group col-6">
                                        <div class="row form-field o_website_form_required_custom">                                        
                                            <div class="col-4">
                                                <label class="col-form-label" for="duedate" style="color:black;">Due Date</label>
                                            </div>
                                            <div class="col-8">
                                            <input type="date" name="duedate" id="duedate" data-mdb-toggle="datepicker" class="form-control duedate datetimepicker-input" />
                                            </div>
                                                                                                                    
                                        </div>
                                    </div>                          
                                </div>
                                <div class="row">
                                    <div class="form-group col-6">
                                        <div class="row form-field o_website_form_required_custom">
                                            
                                            <div class="col-4">
                                                <label class="col-form-label" for="relt_doc_name" style="color:black;">Related Document</label>
                                            </div>
                                            <div class="col-4">                                                
                                                <select id="relt_doc_name" class="form-control relt_doc_name dropdown-toggle">
                                                    <option value="" selected="selected"></option>
                                                    <t t-foreach="model_obj" t-as="model">
                                                        <option value="model['name']" t-attf-id="#{model['id']}">
                                                            <t t-esc="model['name']" />
                                                        </option>
                                                    </t>
                                                </select>
                                                   
                                            </div>
                                            <div class="col-4">                                               
                                                <select class="form-control dropdown-toggle relt_doc_data"  t-attf-data-res_id="#{current_res_id}" id="relt_doc_data" aria-label="Default select example" />
                                            </div>                                                                   
                                        </div>
                                    </div>
                                    <div class="form-group col-6">
                                        <div class="row form-field o_website_form_required_custom">
                                            
                                            <div class="col-4">
                                                <label class="col-form-label" for="duedatereminder" style="color:black;">Reminder Due Date</label>
                                            </div>
                                            <div class="col-8">
                                            <input type="datetime-local" name="duedatereminder" id="duedatereminder" value="sh_date_deadline" class="form-control duedatereminder datetimepicker-input" />
                                            </div>
                                                                                                                    
                                        </div>
                                    </div>                          
                                </div>
                                <div class="row">
                                    <div class="form-group col-6">
                                        <div class="row form-field o_website_form_required_custom">
                                            
                                            <div class="col-4">
                                                <label class="col-form-label" for="link_activity_type_id" style="color:black;">Activity Type</label>
                                            </div>
                                            <div class="col-8">
                                                <select id="link_activity_type_id" class="form-control dropdown-toggle">
                                                    <t t-foreach="request.env['mail.activity.type'].sudo().search(['|', ('res_model', '=', False), ('res_model', '=', res_model)])" t-as="type">
                                                        <option t-att-value="type.id">
                                                            <t t-esc="type.name" />
                                                        </option>
                                                    </t>
                                                </select>
                                            </div>
                                            
                                        </div>
                                    </div>
                                    <div class="form-group col-6">
                                        <div class="row form-field o_website_form_required_custom">
                                            
                                            <div class="col-4">
                                                <label class="col-form-label" for="assigned_to" style="color:black;">Assigned to</label>
                                            </div>
                                            <div class="col-8">
                                                <select id="assigned_to" class="form-control dropdown-toggle">
                                                    <t t-foreach="request.env['res.users'].sudo().search([])" t-as="type">
                                                        <option t-att-value="type.id">
                                                            <t t-esc="type.name" />
                                                        </option>
                                                    </t>
                                                </select>                                                                                       
                                            </div>                                        
                                                                                    
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="form-group col-6">
                                        <div class="row form-field o_website_form_required_custom">                                            
                                            <div class="col-4">
                                                <label class="col-form-label" for="complete_date" style="color:black;">Completed Date</label>
                                            </div>
                                            <div class="col-8">
                                                <input type="date" name="complete_date" id="complete_date" readonly="True" value="date_done" class="form-control complete_date datetimepicker-input" />
                                            </div>
                                            
                                        </div>
                                    </div>
                                    <div class="form-group col-6">                                       
                                        <div class="row form-field o_website_form_required_custom">
                                            <t t-if="request.env.user.sh_activity_access != 'portal_user'">
                                                <div class="col-4">
                                                    <label class="col-form-label" for="user_ids" style="color:black;">Assign Multi Users</label>
                                                </div>
                                                <div class="col-8">                                                    
                                                    <select id="user_ids" name="user_ids" class="form-control sh_custom_user_ids d-none w-100" multiple="multiple">
                                                        <t t-foreach="request.env['res.users'].sudo().search([('share','=',False)])" t-as="user">
                                                           <option t-att-value="user.id">
                                                               <t t-esc="user.name"></t>
                                                            </option>
                                                        </t>
                                                    </select>                                                                                                       
                                                </div>
                                            </t>                                                                                
                                        </div>                                       
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="form-group col-6">
                                        <div class="row form-field">
                                            
                                            <div class="col-4">
                                                <label class="col-form-label" for="summary" style="color:black;">Summary</label>
                                            </div>
                                            <div class="col-8">                                                                   
                                                <input type="text" class="form-control" id="summary" name="summary" value="summary" />
                                            </div>
                                            
                                        </div>
                                    </div>
                                    <div class="form-group col-6">                                
                                        <div class="row form-field">
                                            <t t-if="request.env.user.sh_activity_access == 'portal_manager'">
                                                <div class="col-4">
                                                    <label class="col-form-label" for="supervisor">Supervisor</label>
                                                </div>
                                                <div class="col-8">
                                                    <select id="supervisor" class="form-control dropdown-toggle">
                                                        <t t-foreach="request.env['res.users'].sudo().search([('share','=',False)])" t-as="user">
                                                            <option t-att-value="user.id">
                                                                <t t-esc="user.name" />
                                                            </option>
                                                        </t>
                                                    </select>
                                                </div>
                                            </t>
                                        </div>                                                                   
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="form-group col-6">
                                        <div class="row form-field">
                                            
                                            <div class="col-4">
                                                <label class="col-form-label" for="reminders">Reminders</label>
                                            </div>
                                            <div class="col-8">
                                                <select id="reminders" name="reminders" multiple="multiple" class="form-control sh_custom_user_ids d-none w-100">
                                                    <t t-foreach="request.env['sh.activity.alarm'].sudo().search([])" t-as="alarm">
                                                        <option t-att-value="alarm.id">
                                                            <t t-esc="alarm.name" />
                                                        </option>
                                                    </t>
                                                </select>
                                            </div>
                                            
                                        </div>
                                    </div>
                                    <div class="form-group col-6">                                
                                        <div class="row form-field">
                                        
                                            <div class="col-4">
                                                <label class="col-form-label" for="activity_tags">Activity Tags</label>
                                            </div>
                                            <div class="col-8">
                                                <select id="activity_tags" name="activity_tags" multiple="multiple" class="form-control sh_custom_user_ids d-none w-100">
                                                    <t t-foreach="request.env['sh.activity.tags'].sudo().search([])" t-as="tags">
                                                        <option t-att-value="tags.id">
                                                            <t t-esc="tags.name" />
                                                        </option>
                                                    </t>
                                                </select>
                                            </div>
                                        
                                        </div>                                                                   
                                    </div>
                                </div>
                                <div class="col-md-12 row">                                                        
                                    <textarea id="lognote" name="Lognote" placeholder="Log a note" rows="4" cols="100"></textarea>                                                                       
                                </div>
                            </div>
                            <div class="modal-footer">
                                <div class="form-group row col-12">                                                                                                               
                                    <div class="col-4">
                                        <a id="create_activity" class="btn btn-secondary js_cls_create_activity" title="Create Schedule" aria-label="Create Schedule" role="button" style="color:white;"><i class="fa fa-plus" /> Schedule</a>
                                        <!-- <button id="" name="create_activity"  class="btn btn-secondary js_cls_create_activity">Schedule</button>
                                        &amp;nbsp; -->
                                    </div>                                   
                                    <div class="col-3">
                                        <button id="action_close" name="action_close" class="btn btn-secondary action_cancel" data-dismiss="modal">Close</button>
                                        &amp;nbsp;
                                    </div>                                                                    
                                </div>
                            </div>
                        </div>
                    </div>    
                </div> 
                </div>               
            </t>

            <t t-if="not grouped_activity">
                <div class="alert alert-warning mt8" role="alert">
                    There are no Activity For You.
                </div>
            </t>
        
            <t t-if="grouped_activity">
                <div class="sh_activity_view col-12">
                <div style="display: inline;">
                    <div>
                        <button type="button" class="btn fa fa-th-list activity_list_layout float-right"></button>
                    </div>
                    <div>
                        <button type="button" class="btn fa fa-th-large activity_kanban_layout float-right"></button>
                    </div>
                </div>                
                <br />
                <br />
                <div class="sh_activity_list_view" id="sh_list_view" style="display:none">
                     <t t-call="portal.portal_table">
                         <tr>
                        <th>Document Name</th>
                        <th>Activity Type</th>
                        <th>Assigned To</th>
                        <th>Due Date</th>
                        <th>Status</th>
                    </tr>
                    <tbody style="font-size: 0.8rem;">
                        <t t-foreach="activities" t-as="activity">
                            <tr>
                                <td>                                   
                                    <a t-attf-href="/my/activities/#{activity.id}/#{activity.get_portal_url()}"><t t-esc="activity.res_name"/></a>
                                </td>
                                <td><span t-field="activity.activity_type_id.name" /></td>
                                <td><span t-field="activity.user_id.name" /></td>
                                <td><span t-field="activity.date_deadline" t-options='{"widget": "date"}' /></td>
                                <td><span t-field="activity.state" /></td>                                
                            </tr>
                        </t>
                    </tbody>      
                     </t>                                                   
                </div>
                <div class="sh_activity_kanban_view" id="sh_kanban_view" style="flex: 1 1 auto; position: relative; overflow: auto; max-height: 90vh; display: none; min-height: 40vh;">
                    <t t-foreach="grouped_activity" t-as="groupedactivity">                                             									                                                  
                        <t t-foreach="groupedactivity" t-as="act">
                            <div style="display:inline-flex">                                    
                                <div class="card" style="width:350px; height:160px;">
                                    <div style="display:flex;justify-content:space-between;">
                                        <span class="badge badge-primary align-middle" style="position: relative;top: 4px;right: 4px;text-align: left;margin-left: 8px; padding-top:4px;" t-field="act.state"></span>
                                        <span class="badge badge-pill badge-primary align-middle" style="position: relative;top: 4px;right: 4px;text-align: left;margin-left: 8px; padding-top:4px;" t-field="act.activity_type_id.name"></span>                                                        
                                    </div>                                                                                                                  
                                    <div t-name="kanban-box card-body">                                                                                                                                                      
                                        <div class="d-flex sh_kanban_record_box" style="margin: 4px 8px;position: relative;min-width: 150px;padding: 8px 8px;min-width: 150px;padding: 8px 8px;background-color: white;">                                                        
                                            <div class="oe_kanban_global_click d-flex o_kanban_record_has_image_fill o_res_partner_kanban" style="width:100%;margin: 4px 8px;position: relative;min-width: 150px;padding: 8px 8px;background-color: white;">                                                                                                                        
                                                <t t-if="act">                                                               
                                                    <div class="o_kanban_image_fill_left" style="width:50%">                                                                                                                          
                                                        <a t-attf-href="/my/activities/#{act.id}/#{act.get_portal_url()}"><t t-esc="act.res_name" /></a>
                                                    </div>                                                                 
                                                    <div class="oe_kanban_details d-flex flex-column text-right" style="width:50%">                                                        
                                                        <div class="o_kanban_tags_section oe_kanban_partner_categories"/>
                                                        <ul style="margin-bottom: 2.5px;padding-left: 0;list-style: none;font-size: 0.94791667rem;">                                                                                                                                                                                                   
                                                            <li t-if="act.date_deadline" class="o_text_overflow">
                                                                <strong>Due Date</strong>
                                                                <li>
                                                                    <t t-esc="act.date_deadline"/>
                                                                </li>                                                                
                                                            </li>                                                           
                                                        </ul>                                                       
                                                    </div>
                                                </t>
                                            </div>
                                        </div>
                                    </div>                                       
                                </div>
                            </div>                                                                                             
                        </t> 
                                    
                    </t>
                </div>        
            </div>
            </t>            
        </t>
    </template>
    <template id="portal_activity_form_template">
         <t t-call="portal.portal_layout">
            <t t-set="breadcrumbs_searchbar" t-value="True" />

            <t t-call="portal.portal_searchbar">
                <t t-set="title">Activity</t>
            </t>            
            <div class="modal-content js_cls_activity_form_view">
                <div class="modal-header">
                    <h4 class="modal-title">
                        <t t-esc="sh_activity.res_name"/>
                    </h4>
                    <div class="bg-success text-white d-none js_cls_msg">
                        <h5>Successfully Saved !</h5>
                    </div>                    
                </div>
                <div class="model-body js_cls_form_input">                    
                    <div class="form-row"  style="display:inline">
                        <div class="col-12">
                            <div class="row">
                                <div class="form-group col-6">
                                    <div class="row">
                                        <div class="col-10"></div>
                                        <div class="col-2">
                                            <t t-if="sh_activity.state not in ['done','cancel']">                                      
                                                <div class="col-2">                                            
                                                    <button id="view_save" name="view_save" t-att-data-id="sh_activity.id" class="btn btn-secondary js_cls_save_view">Save</button>
                                                    &amp;nbsp;                                           
                                                </div>
                                            </t>
                                        </div>    
                                    </div>                                   
                                </div>
                                <div class="form-group col-6">                                    
                                    <div class="modal js_cls_feedback" role="dialog">
                                        <div class="modal-dialog" role="Feedback">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 class="modal-title">Activity FeedBack</h5>                                           
                                                </div>
                                                <div class="modal-body">
                                                    <label class="col-form-label" for="feedback">Feedback</label>
                                                    <input type="text" class="form-control feedback" id="feedback" name="feedback" required="True" />
                                                    <span id="alert"></span>
                                                </div>
                                                <div class="modal-footer">
                                                   <div class="col-4">
                                                        <button id="action_done" name="action_done" t-att-data-id="sh_activity.id" class="btn btn-secondary js_cls_action_done">Done</button>
                                                        &amp;nbsp;
                                                    </div>
                                                    <div class="col-5">
                                                        <button id="view_done_schedule_feedback" name="view_confirm" class="btn btn-secondary view_done_schedule">Done &amp; Schedule Next</button>
                                                        &amp;nbsp;
                                                    </div>
                                                    <div class="col-3">
                                                        <button id="action_close" name="action_close" class="btn btn-secondary action_cancel">Close</button>
                                                        &amp;nbsp;
                                                    </div>
                                                </div>
                                            </div>
                                        </div>                                            
                                    </div>
                                    <div class="modal fade bd-example-modal-lg js_cls_schedule_form_view" role="dialog">
                                        <div class="modal-dialog modal-lg" role="Schedule">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 class="modal-title">Schedule Activity</h5>                                           
                                                </div>
                                                <div class="modal-body">                                                  
                                                    <div class="row">
                                                        <div class="form-group col-6">
                                                            <div class="row form-field o_website_form_required_custom">
                                                                
                                                                <div class="col-4">
                                                                    <label class="col-form-label" for="doc_name" style="color:black;">Document Name</label>
                                                                </div>
                                                                <div class="col-8">                                           
                                                                    <input type="text" class="form-control" id="doc_name" name="doc_name" readonly="True" t-att-value="sh_activity.res_name" />
                                                                </div>
                                                                                                                                        
                                                            </div>
                                                        </div>
                                                        <div class="form-group col-6">
                                                            <div class="row form-field o_website_form_required_custom">                                        
                                                                <div class="col-4">
                                                                    <label class="col-form-label" for="duedate" style="color:black;">Due Date</label>
                                                                </div>
                                                                <div class="col-8">
                                                                <input type="date" name="duedate" id="duedate" t-attf-value="#{sh_activity.date_deadline}" class="form-control duedate datetimepicker-input" />
                                                                </div>
                                                                                                                                        
                                                            </div>
                                                        </div>                          
                                                    </div>
                                                    <div class="row">
                                                        <div class="form-group col-6">
                                                            <div class="row form-field o_website_form_required_custom">
                                                                
                                                                <div class="col-4">
                                                                    <label class="col-form-label" for="relt_doc_name" style="color:black;">Related Document</label>
                                                                </div>
                                                                <div class="col-4">
                                                                    <input type="hidden" id="relt_doc_name" name="relt_doc_name"  t-att-value="sh_activity.res_model_id.id"/>
                                                                    <t t-esc="sh_activity.res_model" t-att-value="sh_activity.res_model"></t>  
                                                                </div>
                                                                <div class="col-4">
                                                                    <input type="hidden" id="relt_doc_data" name="relt_doc_data"  t-att-value="sh_activity.res_id"/>
                                                                   <t t-esc="sh_activity.res_name" t-att-value="sh_activity.res_name"></t>  
                                                                </div>                                                                   
                                                            </div>
                                                        </div>
                                                        <div class="form-group col-6">
                                                            <div class="row form-field o_website_form_required_custom">
                                                                
                                                                <div class="col-4">
                                                                    <label class="col-form-label" for="duedatereminder" style="color:black;">Reminder Due Date</label>
                                                                </div>
                                                                <div class="col-8">
                                                                <input type="datetime-local" name="duedatereminder" id="duedatereminder" t-att-value="sh_activity.sh_date_deadline" class="form-control duedatereminder datetimepicker-input" />
                                                                </div>
                                                                                                                                        
                                                            </div>
                                                        </div>                          
                                                    </div>
                                                    <div class="row">
                                                        <div class="form-group col-6">
                                                            <div class="row form-field o_website_form_required_custom">
                                                                
                                                                <div class="col-4">
                                                                    <label class="col-form-label" for="link_activity_type_id" style="color:black;">Activity Type</label>
                                                                </div>
                                                                <div class="col-8">
                                                                    <select id="link_activity_type_id" class="form-control dropdown-toggle">
                                                                        <t t-foreach="request.env['mail.activity.type'].sudo().search(['|', ('res_model', '=', False), ('res_model', '=', res_model)])" t-as="type">
                                                                            <option t-att-value="type.id" t-att-selected="type.id==sh_activity.activity_type_id.id">
                                                                                <t t-esc="type.name" />
                                                                            </option>
                                                                        </t>
                                                                    </select>
                                                                </div>
                                                                
                                                            </div>
                                                        </div>
                                                        <div class="form-group col-6">
                                                            <div class="row form-field o_website_form_required_custom">
                                                                
                                                                <div class="col-4">
                                                                    <label class="col-form-label" for="assigned_to" style="color:black;">Assigned to</label>
                                                                </div>
                                                                <div class="col-8">
                                                                    <select id="assigned_to" class="form-control dropdown-toggle">
                                                                        <t t-foreach="request.env['res.users'].sudo().search([])" t-as="type">
                                                                            <option t-att-value="type.id" t-att-selected="type.id==sh_activity.user_id.id">
                                                                                <t t-esc="type.name" />
                                                                            </option>
                                                                        </t>
                                                                    </select>                                        
                                                                </div>                                        
                                                                                                        
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="form-group col-6">
                                                            <div class="row form-field o_website_form_required_custom">
                                                                
                                                                <div class="col-4">
                                                                    <label class="col-form-label" for="complete_date" style="color:black;">Completed Date</label>
                                                                </div>
                                                                <div class="col-8">
                                                                    <input type="date" name="complete_date" id="complete_date" readonly="True" t-attf-value="#{sh_activity.date_done}" class="form-control complete_date datetimepicker-input" />
                                                                </div>
                                                                
                                                            </div>
                                                        </div>
                                                        <div class="form-group col-6">
                                                            <div class="row form-field o_website_form_required_custom">
                                                                <t t-if="sh_activity.user_id.sh_activity_access != 'portal_user'">
                                                                    <div class="col-4">
                                                                        <label class="col-form-label" for="user_ids" style="color:black;">Assign Multi Users</label>
                                                                    </div>
                                                                    <div class="col-8">
                                                                        <select id="user_ids" name="user_ids" class="form-control selectpicker user_ids" multiple="multiple">
                                                                            <t t-foreach="request.env['res.users'].sudo().search([('share','=',False)])" t-as="user">
                                                                                <option t-att-value="user.id">
                                                                                    <t t-esc="user.name" />
                                                                                </option>
                                                                            </t>
                                                                        </select>
                                                                    </div>
                                                                </t>                                                                                
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="form-group col-6">
                                                            <div class="row form-field">
                                                                
                                                                <div class="col-4">
                                                                    <label class="col-form-label" for="summary" style="color:black;">Summary</label>
                                                                </div>
                                                                <div class="col-8">                                                                   
                                                                    <input type="text" class="form-control" id="summary" name="summary" t-att-value="sh_activity.summary" />
                                                                </div>
                                                                
                                                            </div>
                                                        </div>
                                                        <div class="form-group col-6">                                
                                                            <div class="row form-field">
                                                                <t t-if="sh_activity.user_id.sh_activity_access == 'portal_manager'">
                                                                    <div class="col-4">
                                                                        <label class="col-form-label" for="supervisor">Supervisor</label>
                                                                    </div>
                                                                    <div class="col-8">
                                                                        <select id="supervisor" class="form-control dropdown-toggle">
                                                                            <t t-foreach="request.env['res.users'].sudo().search([('share','=',False)])" t-as="user">
                                                                                <option t-att-value="user.id" t-att-selected="user.id==sh_activity.supervisor_id.id">
                                                                                    <t t-esc="user.name" />
                                                                                </option>
                                                                            </t>
                                                                        </select>
                                                                    </div>
                                                                </t>
                                                            </div>                                                                   
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="form-group col-6">
                                                            <div class="row form-field">
                                                                
                                                                <div class="col-4">
                                                                    <label class="col-form-label" for="reminders">Reminders</label>
                                                                </div>
                                                                <div class="col-8">
                                                                    <select id="reminders" name="reminders" multiple="multiple" class="form-control dropdown-toggle reminders">
                                                                        <t t-foreach="request.env['sh.activity.alarm'].sudo().search([])" t-as="alarm">
                                                                            <option t-att-value="alarm.id" t-att-selected="alarm.id in sh_activity.sh_activity_alarm_ids.ids">
                                                                                <t t-esc="alarm.name" />
                                                                            </option>
                                                                        </t>
                                                                    </select>
                                                                </div>
                                                                
                                                            </div>
                                                        </div>
                                                        <div class="form-group col-6">                                
                                                            <div class="row form-field">
                                                            
                                                                <div class="col-4">
                                                                    <label class="col-form-label" for="activity_tags">Activity Tags</label>
                                                                </div>
                                                                <div class="col-8">
                                                                    <select id="activity_tags" name="activity_tags" multiple="multiple" class="form-control dropdown-toggle activity_tags">
                                                                        <t t-foreach="request.env['sh.activity.tags'].sudo().search([])" t-as="tags">
                                                                            <option t-att-value="tags.id" t-att-selected="tags.id in sh_activity.sh_activity_tags.ids">
                                                                                <t t-esc="tags.name" />
                                                                            </option>
                                                                        </t>
                                                                    </select>
                                                                </div>
                                                            
                                                            </div>                                                                   
                                                        </div>
                                                    </div>
                                                    <div class="col-md-12 row">                                                        
                                                        <textarea id="lognote" name="Lognote" placeholder="Log a note" rows="4" cols="100"></textarea>                                                                       
                                                    </div>
                                                </div>
                                                <div class="modal-footer">
                                                    <div class="form-group row">
                                                        <t t-if="sh_activity.state not in ['done','cancel']">                                                                              
                                                            <div class="col-6">
                                                                <button id="view_schedule_next_schedule" name="view_schedule" class="btn btn-secondary js_cls_schedule_create">Schedule</button>
                                                                &amp;nbsp;
                                                            </div>                                                            
                                                            <div class="col-6">
                                                                <button id="action_close" name="action_close" class="btn btn-secondary action_cancel">Close</button>
                                                                &amp;nbsp;
                                                            </div>
                                                        </t>                                  
                                                    </div>
                                                </div>
                                            </div>
                                        </div>    
                                    </div>
                                    <div class="form-group row">
                                        <t t-if="sh_activity.state not in ['done','cancel']">                                                                              
                                            <div class="col-4">
                                                <button id="view_done" name="view_done" t-att-data-id="sh_activity.id" class="btn btn-secondary js_cls_done_view">Mark as Done</button>
                                                &amp;nbsp;
                                            </div>
                                            <div class="col-5">
                                                <button id="view_done_schedule" name="view_confirm" class="btn btn-secondary js_cls_schedule_activity" t-att-data-id="sh_activity.id">Done &amp; Schedule Next</button>
                                                &amp;nbsp;
                                            </div>
                                            <div class="col-3">
                                                <button id="view_cancel" name="view_cancel" t-att-data-id="sh_activity.id" class="btn btn-secondary view_cancel">Cancel</button>
                                                &amp;nbsp;
                                            </div>
                                        </t>                                    
                                    </div>
                                </div>
                            </div>                        
                            <div class="row">
                                <div class="form-group col-6">
                                    <div class="row form-field o_website_form_required_custom">
                                        
                                        <div class="col-4">
                                            <label class="col-form-label" for="link_name" style="color:black;">Document Name</label>
                                        </div>
                                        <div class="col-8">                                           
                                            <input type="text" class="form-control" id="doc_name" name="doc_name" readonly="True" t-att-value="sh_activity.res_name" />
                                        </div>
                                                                                                                
                                    </div>
                                </div>
                                <div class="form-group col-6">
                                    <div class="row form-field o_website_form_required_custom">                                        
                                        <div class="col-4">
                                            <label class="col-form-label" for="duedate" style="color:black;">Due Date</label>
                                        </div>
                                        <div class="col-8">
                                        <input type="date" name="duedate" id="duedate" t-attf-value="#{sh_activity.date_deadline}" class="form-control duedate datetimepicker-input" />
                                        </div>
                                                                                                                
                                    </div>
                                </div>                          
                            </div>
                            <div class="row">
                                <div class="form-group col-6">
                                    <div class="row form-field o_website_form_required_custom">
                                        
                                        <div class="col-4">
                                            <label class="col-form-label" for="relt_doc_name" style="color:black;">Related Document</label>
                                        </div>
                                        <div class="col-4">
                                            <t t-esc="sh_activity.res_model"></t>                                            
                                        </div>
                                        <div class="col-4">
                                            <t t-esc="sh_activity.res_name">                                               
                                            </t>           
                                        </div>
                                                                                                                
                                    </div>
                                </div>
                                <div class="form-group col-6">
                                    <div class="row form-field o_website_form_required_custom">
                                        
                                        <div class="col-4">
                                            <label class="col-form-label" for="duedatereminder" style="color:black;">Reminder Due Date</label>
                                        </div>
                                        <div class="col-8">
                                        <input type="datetime-local" name="duedatereminder" id="duedatereminder" t-att-value="sh_activity.sh_date_deadline" class="form-control duedatereminder datetimepicker-input" />
                                        </div>
                                                                                                                
                                    </div>
                                </div>                          
                            </div>
                            <div class="row">
                                <div class="form-group col-6">
                                    <div class="row form-field o_website_form_required_custom">
                                        
                                        <div class="col-4">
                                            <label class="col-form-label" for="link_activity_type_id" style="color:black;">Activity Type</label>
                                        </div>
                                        <div class="col-8">
                                            <select id="link_activity_type_id" class="form-control dropdown-toggle">
                                                <t t-foreach="request.env['mail.activity.type'].sudo().search(['|', ('res_model', '=', False), ('res_model', '=', res_model)])" t-as="type">
                                                    <option t-att-value="type.id" t-att-selected="type.id==sh_activity.activity_type_id.id">
                                                        <t t-esc="type.name" />
                                                    </option>
                                                </t>
                                            </select>
                                        </div>
                                        
                                    </div>
                                </div>
                                <div class="form-group col-6">
                                    <div class="row form-field o_website_form_required_custom">
                                        
                                        <div class="col-4">
                                            <label class="col-form-label" for="assigned_to" style="color:black;">Assigned to</label>
                                        </div>
                                        <div class="col-8">
                                            <select id="assigned_to" class="form-control dropdown-toggle">
                                                <t t-foreach="request.env['res.users'].sudo().search([])" t-as="type">
                                                    <option t-att-value="type.id" t-att-selected="type.id==sh_activity.user_id.id">
                                                        <t t-esc="type.name" />
                                                    </option>
                                                </t>
                                            </select>                                        
                                        </div>                                        
                                                                                
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group col-6">
                                    <div class="row form-field o_website_form_required_custom">
                                        
                                        <div class="col-4">
                                            <label class="col-form-label" for="complete_date" style="color:black;">Completed Date</label>
                                        </div>
                                        <div class="col-8">
                                            <input type="date" name="complete_date" id="complete_date" readonly="True" t-attf-value="#{sh_activity.date_done}" class="form-control complete_date datetimepicker-input" />
                                        </div>
                                        
                                    </div>
                                </div>
                                <div class="form-group col-6">
                                    <div class="row form-field o_website_form_required_custom">
                                        <t t-if="sh_activity.user_id.sh_activity_access != 'portal_user'">
                                            <div class="col-4">
                                                <label class="col-form-label" for="user_ids" style="color:black;">Assign Multi Users</label>
                                            </div>
                                            <div class="col-8">
                                                <select id="user_ids" name="user_ids" class="form-control sh_custom_user_ids d-none w-100" multiple="multiple">
                                                    <t t-foreach="request.env['res.users'].sudo().search([('share','=',False)])" t-as="user">
                                                        <option t-att-value="user.id">
                                                            <t t-esc="user.name" />
                                                        </option>
                                                    </t>
                                                </select>
                                            </div>
                                        </t>                                                                                
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group col-6">
                                    <div class="row form-field">
                                        
                                        <div class="col-4">
                                            <label class="col-form-label" for="summary" style="color:black;">Summary</label>
                                        </div>
                                        <div class="col-8">                                           
                                            <input type="text" class="form-control" id="summary" name="summary" t-att-value="sh_activity.summary" />
                                        </div>
                                        
                                    </div>
                                </div>
                                <div class="form-group col-6">                                
                                    <div class="row form-field">
                                        <t t-if="sh_activity.user_id.sh_activity_access == 'portal_manager'">
                                            <div class="col-4">
                                                <label class="col-form-label" for="supervisor">Supervisor</label>
                                            </div>
                                            <div class="col-8">
                                                <select id="supervisor" class="form-control dropdown-toggle">
                                                    <t t-foreach="request.env['res.users'].sudo().search([('share','=',False)])" t-as="user">
                                                        <option t-att-value="user.id" t-att-selected="user.id==sh_activity.supervisor_id.id">
                                                            <t t-esc="user.name" />
                                                        </option>
                                                    </t>
                                                </select>
                                            </div>
                                        </t>
                                    </div>                                                                   
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group col-6">
                                    <div class="row form-field">
                                        
                                        <div class="col-4">
                                            <label class="col-form-label" for="reminders">Reminders</label>
                                        </div>
                                        <div class="col-8">
                                            <select id="reminders" name="reminders" multiple="multiple" class="form-control sh_custom_user_ids d-none w-100">
                                            <t t-foreach="request.env['sh.activity.alarm'].sudo().search([])" t-as="alarm">
                                                <option t-att-value="alarm.id" t-att-selected="alarm.id in sh_activity.sh_activity_alarm_ids.ids">
                                                    <t t-esc="alarm.name" />
                                                </option>
                                            </t>
                                    </select>
                                        </div>
                                        
                                    </div>
                                </div>
                                <div class="form-group col-6">                                
                                    <div class="row form-field">
                                       
                                        <div class="col-4">
                                            <label class="col-form-label" for="activity_tags">Activity Tags</label>
                                        </div>
                                        <div class="col-8">
                                            <select id="activity_tags" name="activity_tags" multiple="multiple" class="form-control sh_custom_user_ids d-none w-100">
                                                <t t-foreach="request.env['sh.activity.tags'].sudo().search([])" t-as="tags">
                                                    <option t-att-value="tags.id" t-att-selected="tags.id in sh_activity.sh_activity_tags.ids">
                                                        <t t-esc="tags.name" />
                                                    </option>
                                                </t>
                                            </select>
                                        </div>
                                       
                                    </div>                                                                   
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group col-12">
                                     <textarea id="lognote" name="Lognote" placeholder="Log a note" rows="4" cols="100"></textarea>  
                                </div>                                  
                            </div>
                        </div>                                         
                    </div>
                </div>
            </div>
        </t>
    </template>
</odoo>
